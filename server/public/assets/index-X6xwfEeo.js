import{d as H,n as k,m as v,c as K,x as M,l as Y,g as Te,a as i,O as ee,w as J,a8 as ue,au as Ee,aa as de,L as $,p as j,$ as Me,M as U,t as ze,a0 as I,av as _e,am as Re,aw as Ae,ag as $e,ax as De,e as Ne,r as X,a9 as Oe,o as qe,h as We,y as Fe,j as F,i as je,ay as Ue,az as He,b as Ke,Z as Ye,aA as re,E as Je,s as oe,aB as Ze,aC as Ge,aD as Qe}from"./index-BqY3WvCA.js";const[Xe,O]=K("loading"),pe=Array(12).fill(null).map((e,n)=>i("i",{class:O("line",String(n+1))},null)),et=i("svg",{class:O("circular"),viewBox:"25 25 50 50"},[i("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),tt={size:k,type:v("circular"),color:String,vertical:Boolean,textSize:k,textColor:String};var nt=H({name:Xe,props:tt,setup(e,{slots:n}){const r=M(()=>Y({color:e.color},Te(e.size))),g=()=>{const s=e.type==="spinner"?pe:et;return i("span",{class:O("spinner",e.type),style:r.value},[n.icon?n.icon():s])},o=()=>{var s;if(n.default)return i("span",{class:O("text"),style:{fontSize:ee(e.textSize),color:(s=e.textColor)!=null?s:e.color}},[n.default()])};return()=>{const{type:s,vertical:w}=e;return i("div",{class:O([s,{vertical:w}]),"aria-live":"polite","aria-busy":!0},[g(),o()])}}});const at=J(nt),[it,R]=K("button"),lt=Y({},de,{tag:v("button"),text:String,icon:String,type:v("default"),size:v("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:v("button"),loadingSize:k,loadingText:String,loadingType:String,iconPosition:v("left")});var rt=H({name:it,props:lt,emits:["click"],setup(e,{emit:n,slots:r}){const g=ue(),o=()=>r.loading?r.loading():i(at,{size:e.loadingSize,type:e.loadingType,class:R("loading")},null),s=()=>{if(e.loading)return o();if(r.icon)return i("div",{class:R("icon")},[r.icon()]);if(e.icon)return i($,{name:e.icon,class:R("icon"),classPrefix:e.iconPrefix},null)},w=()=>{let c;if(e.loading?c=e.loadingText:c=r.default?r.default():e.text,c)return i("span",{class:R("text")},[c])},B=()=>{const{color:c,plain:d}=e;if(c){const y={color:d?c:"white"};return d||(y.background=c),c.includes("gradient")?y.border=0:y.borderColor=c,y}},u=c=>{e.loading?j(c):e.disabled||(n("click",c),g())};return()=>{const{tag:c,type:d,size:y,block:z,round:D,plain:N,square:S,loading:L,disabled:V,hairline:_,nativeType:Z,iconPosition:P}=e,G=[R([d,y,{plain:N,block:z,round:D,square:S,loading:L,disabled:V,hairline:_}]),{[Ee]:_}];return i(c,{type:Z,class:G,style:B(),disabled:V,onClick:u},{default:()=>[i("div",{class:R("content")},[P==="left"&&s(),w(),P==="right"&&s()])]})}}});const kt=J(rt);let ot=0;function ct(){const e=Me(),{name:n="unknown"}=(e==null?void 0:e.type)||{};return"".concat(n,"-").concat(++ot)}const[st,A]=K("cell"),fe={tag:v("div"),icon:String,size:String,title:k,value:k,label:k,center:Boolean,isLink:Boolean,border:ze,iconPrefix:String,valueClass:U,labelClass:U,titleClass:U,titleStyle:null,arrowDirection:String,required:{type:[Boolean,String],default:null},clickable:{type:Boolean,default:null}},ut=Y({},fe,de);var dt=H({name:st,props:ut,setup(e,{slots:n}){const r=ue(),g=()=>{if(n.label||I(e.label))return i("div",{class:[A("label"),e.labelClass]},[n.label?n.label():e.label])},o=()=>{var u;if(n.title||I(e.title)){const c=(u=n.title)==null?void 0:u.call(n);return Array.isArray(c)&&c.length===0?void 0:i("div",{class:[A("title"),e.titleClass],style:e.titleStyle},[c||i("span",null,[e.title]),g()])}},s=()=>{const u=n.value||n.default;if(u||I(e.value))return i("div",{class:[A("value"),e.valueClass]},[u?u():i("span",null,[e.value])])},w=()=>{if(n.icon)return n.icon();if(e.icon)return i($,{name:e.icon,class:A("left-icon"),classPrefix:e.iconPrefix},null)},B=()=>{if(n["right-icon"])return n["right-icon"]();if(e.isLink){const u=e.arrowDirection&&e.arrowDirection!=="right"?"arrow-".concat(e.arrowDirection):"arrow";return i($,{name:u,class:A("right-icon")},null)}};return()=>{var u;const{tag:c,size:d,center:y,border:z,isLink:D,required:N}=e,S=(u=e.clickable)!=null?u:D,L={center:y,required:!!N,clickable:S,borderless:!z};return d&&(L[d]=!!d),i(c,{class:A(L),role:S?"button":void 0,tabindex:S?0:void 0,onClick:r},{default:()=>{var V;return[w(),o(),s(),B(),(V=n.extra)==null?void 0:V.call(n)]}})}}});const ft=J(dt);function ge(e){return Array.isArray(e)?!e.length:e===0?!1:!e}function gt(e,n){if(ge(e)){if(n.required)return!1;if(n.validateEmpty===!1)return!0}return!(n.pattern&&!n.pattern.test(String(e)))}function mt(e,n){return new Promise(r=>{const g=n.validator(e,n);if(De(g)){g.then(r);return}r(g)})}function ce(e,n){const{message:r}=n;return $e(r)?r(e,n):r||""}function bt({target:e}){e.composing=!0}function se({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function ht(e,n){const r=_e();e.style.height="auto";let g=e.scrollHeight;if(Re(n)){const{maxHeight:o,minHeight:s}=n;o!==void 0&&(g=Math.min(g,o)),s!==void 0&&(g=Math.max(g,s))}g&&(e.style.height="".concat(g,"px"),Ae(r))}function vt(e,n){return e==="number"&&(e="text",n!=null||(n="decimal")),e==="digit"&&(e="tel",n!=null||(n="numeric")),{type:e,inputmode:n}}function C(e){return[...e].length}function p(e,n){return[...e].slice(0,n).join("")}const[yt,b]=K("field"),St={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:k,max:Number,min:Number,formatter:Function,clearIcon:v("clear"),modelValue:Ke(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,clearTrigger:v("focus"),formatTrigger:v("onChange"),spellcheck:{type:Boolean,default:null},error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null},inputmode:String},xt=Y({},fe,St,{rows:k,type:v("text"),rules:Array,autosize:[Boolean,Object],labelWidth:k,labelClass:U,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var Ct=H({name:yt,props:xt,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:n,slots:r}){const g=ct(),o=Ne({status:"unvalidated",focused:!1,validateMessage:""}),s=X(),w=X(),B=X(),{parent:u}=Oe(Ye),c=()=>{var t;return String((t=e.modelValue)!=null?t:"")},d=t=>{if(I(e[t]))return e[t];if(u&&I(u.props[t]))return u.props[t]},y=M(()=>{const t=d("readonly");if(e.clearable&&!t){const a=c()!=="",l=e.clearTrigger==="always"||e.clearTrigger==="focus"&&o.focused;return a&&l}return!1}),z=M(()=>B.value&&r.input?B.value():e.modelValue),D=M(()=>{var t;const a=d("required");return a==="auto"?(t=e.rules)==null?void 0:t.some(l=>l.required):a}),N=t=>t.reduce((a,l)=>a.then(()=>{if(o.status==="failed")return;let{value:f}=z;if(l.formatter&&(f=l.formatter(f,l)),!gt(f,l)){o.status="failed",o.validateMessage=ce(f,l);return}if(l.validator)return ge(f)&&l.validateEmpty===!1?void 0:mt(f,l).then(m=>{m&&typeof m=="string"?(o.status="failed",o.validateMessage=m):m===!1&&(o.status="failed",o.validateMessage=ce(f,l))})}),Promise.resolve()),S=()=>{o.status="unvalidated",o.validateMessage=""},L=()=>n("endValidate",{status:o.status,message:o.validateMessage}),V=(t=e.rules)=>new Promise(a=>{S(),t?(n("startValidate"),N(t).then(()=>{o.status==="failed"?(a({name:e.name,message:o.validateMessage}),L()):(o.status="passed",a(),L())})):a()}),_=t=>{if(u&&e.rules){const{validateTrigger:a}=u.props,l=re(a).includes(t),f=e.rules.filter(m=>m.trigger?re(m.trigger).includes(t):l);f.length&&V(f)}},Z=t=>{var a;const{maxlength:l}=e;if(I(l)&&C(t)>+l){const f=c();if(f&&C(f)===+l)return f;const m=(a=s.value)==null?void 0:a.selectionEnd;if(o.focused&&m){const T=[...t],E=T.length-+l;return T.splice(m-E,E),T.join("")}return p(t,+l)}return t},P=(t,a="onChange")=>{var l,f;const m=t;t=Z(t);const T=C(m)-C(t);if(e.type==="number"||e.type==="digit"){const x=e.type==="number";if(t=Ue(t,x,x),a==="onBlur"&&t!==""&&(e.min!==void 0||e.max!==void 0)){const h=He(+t,(l=e.min)!=null?l:-1/0,(f=e.max)!=null?f:1/0);+t!==h&&(t=h.toString())}}let E=0;if(e.formatter&&a===e.formatTrigger){const{formatter:x,maxlength:h}=e;if(t=x(t),I(h)&&C(t)>+h&&(t=p(t,+h)),s.value&&o.focused){const{selectionEnd:W}=s.value,le=p(m,W);E=C(x(le))-C(le)}}if(s.value&&s.value.value!==t)if(o.focused){let{selectionStart:x,selectionEnd:h}=s.value;if(s.value.value=t,I(x)&&I(h)){const W=C(t);T?(x-=T,h-=T):E&&(x+=E,h+=E),s.value.setSelectionRange(Math.min(x,W),Math.min(h,W))}}else s.value.value=t;t!==e.modelValue&&n("update:modelValue",t)},G=t=>{t.target.composing||P(t.target.value)},Q=()=>{var t;return(t=s.value)==null?void 0:t.blur()},te=()=>{var t;return(t=s.value)==null?void 0:t.focus()},q=()=>{const t=s.value;e.type==="textarea"&&e.autosize&&t&&ht(t,e.autosize)},me=t=>{o.focused=!0,n("focus",t),F(q),d("readonly")&&Q()},be=t=>{o.focused=!1,P(c(),"onBlur"),n("blur",t),!d("readonly")&&(_("onBlur"),F(q),Ze())},ne=t=>n("clickInput",t),he=t=>n("clickLeftIcon",t),ve=t=>n("clickRightIcon",t),ye=t=>{j(t),n("update:modelValue",""),n("clear",t)},ae=M(()=>{if(typeof e.error=="boolean")return e.error;if(u&&u.props.showError&&o.status==="failed")return!0}),Se=M(()=>{const t=d("labelWidth"),a=d("labelAlign");if(t&&a!=="top")return{width:ee(t)}}),xe=t=>{t.keyCode===13&&(!(u&&u.props.submitOnEnter)&&e.type!=="textarea"&&j(t),e.type==="search"&&Q()),n("keypress",t)},ie=()=>e.id||"".concat(g,"-input"),Ce=()=>o.status,Ie=()=>{const t=b("control",[d("inputAlign"),{error:ae.value,custom:!!r.input,"min-height":e.type==="textarea"&&!e.autosize}]);if(r.input)return i("div",{class:t,onClick:ne},[r.input()]);const a={id:ie(),ref:s,name:e.name,rows:e.rows!==void 0?+e.rows:void 0,class:t,disabled:d("disabled"),readonly:d("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,enterkeyhint:e.enterkeyhint,spellcheck:e.spellcheck,"aria-labelledby":e.label?"".concat(g,"-label"):void 0,"data-allow-mismatch":"attribute",onBlur:be,onFocus:me,onInput:G,onClick:ne,onChange:se,onKeypress:xe,onCompositionend:se,onCompositionstart:bt};return e.type==="textarea"?i("textarea",oe(a,{inputmode:e.inputmode}),null):i("input",oe(vt(e.type,e.inputmode),a),null)},ke=()=>{const t=r["left-icon"];if(e.leftIcon||t)return i("div",{class:b("left-icon"),onClick:he},[t?t():i($,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},we=()=>{const t=r["right-icon"];if(e.rightIcon||t)return i("div",{class:b("right-icon"),onClick:ve},[t?t():i($,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},Ve=()=>{if(e.showWordLimit&&e.maxlength){const t=C(c());return i("div",{class:b("word-limit")},[i("span",{class:b("word-num")},[t]),Je("/"),e.maxlength])}},Be=()=>{if(u&&u.props.showErrorMessage===!1)return;const t=e.errorMessage||o.validateMessage;if(t){const a=r["error-message"],l=d("errorMessageAlign");return i("div",{class:b("error-message",l)},[a?a({message:t}):t])}},Le=()=>{const t=d("labelWidth"),a=d("labelAlign"),l=d("colon")?":":"";if(r.label)return[r.label(),l];if(e.label)return i("label",{id:"".concat(g,"-label"),for:r.input?void 0:ie(),"data-allow-mismatch":"attribute",onClick:f=>{j(f),te()},style:a==="top"&&t?{width:ee(t)}:void 0},[e.label+l])},Pe=()=>[i("div",{class:b("body")},[Ie(),y.value&&i($,{ref:w,name:e.clearIcon,class:b("clear")},null),we(),r.button&&i("div",{class:b("button")},[r.button()])]),Ve(),Be()];return qe({blur:Q,focus:te,validate:V,formValue:z,resetValidation:S,getValidationStatus:Ce}),Ge(Qe,{customValue:B,resetValidation:S,validateWithTrigger:_}),We(()=>e.modelValue,()=>{P(c()),S(),_("onChange"),F(q)}),Fe(()=>{P(c(),e.formatTrigger),F(q)}),je("touchstart",ye,{target:M(()=>{var t;return(t=w.value)==null?void 0:t.$el})}),()=>{const t=d("disabled"),a=d("labelAlign"),l=ke(),f=()=>{const m=Le();return a==="top"?[l,m].filter(Boolean):m||[]};return i(ft,{size:e.size,class:b({error:ae.value,disabled:t,["label-".concat(a)]:a}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:Se.value,valueClass:b("value"),titleClass:[b("label",[a,{required:D.value}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:l&&a!=="top"?()=>l:null,title:f,value:Pe,extra:r.extra})}}});const wt=J(Ct);export{kt as B,ft as C,wt as F,at as L,St as f,ct as u};
